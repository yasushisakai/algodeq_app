{% extends "base.html" %}
{% load staticfiles %}

{% block title %} lmn architecture {% endblock %}


{% block head %}



    <script type="text/javascript" src="{% static "js/three.js" %}"></script>
    <script type="text/javascript" src="{% static "js/d3.js" %}"></script>
    <script type="text/javascript" src="{% static "js/d3.layout.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/packages.js" %}"></script>

    <script type="text/javascript" src="{% static "js/helper_functions.js" %}"></script>


    {#    <link type="text/css" rel="stylesheet" href="{% static "css/d3style.css" %}"/>#}
    {#    <style>#}
    <style>

        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 1.5px;
        }

        .node {
            font: 10px sans-serif;
        }

        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 1.5px;
        }

    </style>

    <script>
        {#        var plans_json = JSON.parse({{ plans_json|safe}});#}
        var csrf_token = '{{ csrf_token }}';
    </script>

    <script src="{% static "js/index.js" %}">
    </script>

{% endblock %}

{% block header %}
    <!-- todo: make header -->

    <div class="pure-g">
        <div class="pure-u-3-5"><h1>LMN ARCHITECTURE.COM</h1>

            <h2>the decentralized version controlled building system</h2>
        </div>
        <div class="pure-u-2-5">

            <div class="login">
                <br/>

                <div class="webfont">you are not logged in, you can either login or <a href="/sign_up/">sign-up</a>.
                </div>
                　　　　　<br/>


                {% include "header_with_login.html" %}

            </div>


        </div>
    </div>


{% endblock %}

{% block contents %}

    <div class="pure-g">
        <div class="pure-u-4-5">
            <script>
                var impData = {{ plans_json|safe}};
                var count = {{ plans_num }};
                treeDiagram();
            </script>
        </div>
        <div class="pure-u-1-5">
            <div id="demo-horizontal-menu">
                <ul id="std-menu-items">
                    <li>
                        <a href="#">sort by</a>
                        <ul>
                            <li class="pure-menu-heading">architect</li>
                            <li><a href="javascript:void(0);" onclick="reWrite();">high score</a></li>
                            <li><a href="#">*****</a></li>
                            <li><a href="#">*****</a></li>

                        </ul>
                    </li>
                </ul>
                <a href="javascript:void(0);" onclick="reWrite(Lst);">high score</a>
            </div>

            <script>
                YUI({
                    classNamePrefix: 'pure'
                }).use('gallery-sm-menu', function (Y) {

                            var horizontalMenu = new Y.Menu({
                                container: '#demo-horizontal-menu',
                                sourceNode: '#std-menu-items',
                                orientation: 'horizontal',
                                hideOnOutsideClick: false,
                                hideOnClick: false
                            });

                            horizontalMenu.render();
                            horizontalMenu.show();

                        });

                var Lst = Lst_sort();
                //SortScore(Lst);
                //console.log(LstS);

                document.write('<div id="make-list">');
                domMaker(Lst);

                function domMaker(array) {


                    for (var i in array) {
                        document.write("<li>");
                        document.write("<a href=" + array[i].url + ">");
                        document.write(array[i].id);
                        document.write(array[i].name);
                        document.write("</a>");
                        document.write("<br/>");
                        document.write("</li>");

                    }
                    console.log("test");

                }
                document.write("</div>");

                function reWrite(array) {
                    SortScore(array);
                    var txt = domRewrite(array);
                    console.log(txt);

                    document.getElementById("make-list").innerHTML = txt;

                    function domRewrite (array) {
                        var ttt;

                        for (var i in array){
                            ttt +="<li><a href=" + array[i].url + ">";
                            ttt +=array[i].id;
                            ttt +=array[i].name;
                            ttt +="</a><br/></li>";
                        }

                        return ttt;
                    }// domMaker(Lst);


                }


            </script>


        </div>

    </div>

    {{ plans_json }}



{% endblock %}

{% block footer %}
    <!-- todo: make footer -->

{% endblock %}

