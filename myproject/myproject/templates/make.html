{% extends "base.html" %}
{% load staticfiles %}

{% block title %}{% endblock %}


{% block head %}

    <script src="{% static "js/three.min.js" %}"></script>
    <script src="{% static "js/OrbitControls.js" %}"></script>  // class for mouse control

    <script src="{% static "js/diff_match_patch.js" %}"></script>  // diff

    <script>

        var path_to_static = {% static "" %};

        {% if user.is_authenticated %}
            var is_authenticated = true;
            var csrf_token = '{{ csrf_token }}';
        {% else %}
            var is_authenticated = false;
        {% endif %}

        var plan_json = {{ plan_json | safe}};  // plan will be render in any occasion.
        var is_make = true;

    </script>

    <script src="{% static "js/helper_functions.js" %}"></script>

    <script src="{% static "js/model_manipulation.js" %}"></script>
    <script src="{% static "js/events.js" %}"></script>  // events will be assigned inside make.js, setup_events

    <script src="{% static "model/class/Axis.js" %}"></script>
    <script src="{% static "model/class/Ground.js" %}"></script>
    <script src="{% static "model/class/Cursor.js" %}"></script>
    <script src="{% static "model/class/Light.js" %}"></script>
    <script src="{% static "model/class/Cube.js" %}"></script>
    <script src="{% static "model/class/Wall.js" %}"></script>
    <script src="{% static "model/class/Floor.js" %}"></script>
    <script src="{% static "model/class/Plan.js" %}"></script>


    <script>
        $(document).ready(function () {
            initialize();
            // 'initialize' written in make.js
        });
    </script>

{% endblock %}

{% block header %}

{% endblock %}

{% block contents %}

    {% if user.is_authenticated %}

        Hi, {{ user.username }}. <a href="/logout/">log out</a>.

    {% else %}

        email: <input type="email" id="e-mail">
        password: <input type="password" id="password">
        <button onclick="log_in()">log-in</button>or
        <a href="/sign-up/">sign-up</a>

    {% endif %}

    <div class="go_back" onclick="history.back()">go back</div>

    <div id="navigation">

        <div id="model_info">
            parent plan info
            {{ plan.id }}<br>
            {{ plan.name }}<br>
            {{ plan.creation_time }}<br>
            {{ plan.image_file }}<br>
            {{ plan.similarity }}<br>
            <span id="plan_total_points">{{ plan.get_total_points }}</span><br>
            {{ plan.architect.username }}<br>
            {% if plan.parent_plan %}
                {{ plan.parent_plan.name }}
            {% endif %}
        </div>

        <div id="new_model_info">
            <p id="new_model_name"><input type="text" name="new_name" size="100"></p>
            <!-- <p id="new_model_geometry"></p> -->
            <p id="new_model_similarity"></p>
            <p id="new_model_cost"></p>
        </div>

        <div id="model_action">
            {% if user.is_authenticated %}
                <div id="save_plan" onclick="save_plan({{ plan.id }})">save plan</div>
            {% else %}
                you can add create plans if you are logged in.
            {% endif %}
            <div class="error"></div>

            <div id="make_creation" onclick="change_room_type(0);">room type 1 (living)</div>
            <div id="make_creation" onclick="change_room_type(1);">room type 2 (dining)</div>
            <div id="make_creation" onclick="change_room_type(2);">room type 3 (kitchen)</div>
            <div id="make_creation" onclick="change_room_type(3);">room type 4 (bedroom)</div>
            <div id="make_creation" onclick="change_room_type(4);">room type 5 (wc/bath)</div>
            <div id="make_creation" onclick="change_room_type(5);">room type 6 (staircase)</div>
            <div id="make_creation" onclick="change_room_type(6);">delete room</div>
            <div id="make_creation" onclick="change_floor(0);">change floor grid to 1f.</div>
            <div id="make_creation" onclick="change_floor(1);">change floor grid to 2f.</div>
            <div id="make_creation" onclick="change_floor(2);">change floor grid to 3f.</div>

        </div>
    </div>


{% endblock %}

{% block footer %}

{% endblock %}

{% block canvas %}
    <div id="webgl_canvas"></div>
{% endblock %}