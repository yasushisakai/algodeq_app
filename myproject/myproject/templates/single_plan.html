{% extends "base.html" %}
{% load staticfiles %}

{% block title %}{% endblock %}


{% block head %}

    <script src="{% static "js/three.min.js" %}"></script>
    <!-- todo: decide weather you need it in single_plan.js -->
    <script src="{% static "js/OrbitControls.js" %}"></script>



    <script>
        {% if user.is_authenticated %}
            var is_authenticated = true;
            var csrf_token = '{{ csrf_token }}';
        {% else %}
            var is_authenticated = false;
        {% endif %}
        var plan_json = {{ plan_json | safe}};
    </script>

    <script src="{% static "js/helper_functions.js" %}"></script>
    <script src="{% static "js/single_plan.js" %}"></script>

{% endblock %}

{% block header %}

{% endblock %}

{% block contents %}

    {% if user.is_authenticated %}
        {{ user.id }}: {{ user.username }}
    {% else %}
        not logged in
    {% endif %}

    <div class="go_back" onclick="document.location.href='../../'">go back</div>

    <div id="model_info">
        {{ plan.id }}<br>
        {{ plan.name }}<br>
        {{ plan.creation_time }}<br>
        {{ plan.image_file }}<br>
        {{ plan.similarity }}<br>
        {{ plan.geometry }}<br>
        <span id="plan_total_points">{{ plan.get_total_points }}</span><br>
        {{ plan.architect.username }}<br>
        {% if plan.parent_plan %}
            {{ plan.parent_plan.name }}
        {% endif %}
    </div>

    <div id="model_action">
        {% if user.is_authenticated %}
            <div id="model_add_points" onclick="add_points({{ plan.id }},10.0)">add points</div>
        {% else %}
            you can add points by logging in.
        {% endif %}
        <div id="model_make_plan" onclick="make_plan({{ plan.id }})">make plan</div>
    </div>

{% endblock %}

{% block footer %}

{% endblock %}

{% block canvas %}
    <div id="webgl_canvas"></div>
{% endblock %}